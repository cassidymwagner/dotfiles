!function(t,e){Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t,arguments)}};var i=function(t,e){return e=e||{},this.completed=0,this.killed=!1,this.lastResult=[],this.name="string"==typeof e.name?e.name:"unnamed",this.onComplete="function"==typeof e.onComplete?e.onComplete:null,this.onKilled="function"==typeof e.onKilled?e.onKilled:null,this.steps=t||[],this.total=0,this};i.prototype={log:function(t,e,i,n){},run:function(){var t=Array.prototype.slice.call(arguments);return this.killed=!1,this.total=this.steps.length,this.completed=0,this.total>0?this.next.apply(this,t):"function"==typeof this.onComplete&&this.onComplete.apply(this,t),this},kill:function(){if(this.killed!==!0&&"function"==typeof this.onKilled){var t=Array.prototype.slice.call(arguments);this.onKilled.apply(this,t)}this.killed=!0},next:function(){if(this.killed)return!1;var t=Array.prototype.slice.call(arguments),n=this.completed-2;if("undefined"!=typeof this.lastResult[n])try{delete this.lastResult[n]}catch(t){this.lastResult[n]=e}if(this.completed===this.total)"function"==typeof this.onComplete&&(t.push(this),this.completed+=1,this.onComplete.apply(this,t));else{var s=this.steps[this.completed];this.completed+=1,s instanceof i?this.runChildSequence(s,t):"function"==typeof s?(t.push(this),s.apply(this,t)):this.next()}return!0},runChildSequence:function(t,e){var i=this;if("function"==typeof t.onComplete){var n=t.onComplete;t.onComplete=function(){n(),i.next.apply(i,e)}}else t.onComplete=function(){i.next.apply(i,e)};t.addResult(this.getLastResult()),t.run.apply(t,e)},addStep:function(t){return this.steps.push(t),this.total=this.steps.length,this},addSteps:function(t){for(var e=0;e<t.length;e++)this.addStep(t[e]);return this},insertStep:function(t){return this.steps.splice(this.completed,0,t),this.total=this.steps.length,this},insertSteps:function(t){t.reverse();for(var e=0;e<t.length;e++)this.insertStep(t[e]);return this},addResult:function(t){return this.lastResult=[],this.lastResult[this.completed]=t,this},getLastResult:function(){var t=this.completed>this.total?this.total:this.completed-1;return t<0||"undefined"==typeof this.lastResult[t]?null:this.lastResult[t]}},"function"==typeof define?define(function(){return i}):(t.DropletJS="object"==typeof t.DropletJS&&"null"!==t.DropletJS?t.DropletJS:{},t.DropletJS.Sequencer=i)}(window);