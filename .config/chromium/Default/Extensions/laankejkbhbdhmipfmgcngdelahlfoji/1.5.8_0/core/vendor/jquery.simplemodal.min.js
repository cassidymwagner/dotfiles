!function(t){"function"==typeof define&&define.amd?define(["core/vendor/jquery.min"],t):t(jQuery)}(function(t){var i,e,o=[],s=t(document),n=navigator.userAgent.toLowerCase(),d=t(window),l=[],a=null,h=/msie/.test(n)&&!/opera/.test(n),c=/opera/.test(n);i=h&&/msie 6./.test(n)&&"object"!=typeof window.XMLHttpRequest,e=h&&/msie 7.0/.test(n),t.modal=function(i,e){return t.modal.impl.init(i,e)},t.modal.close=function(){t.modal.impl.close()},t.modal.focus=function(i){t.modal.impl.focus(i)},t.modal.setContainerDimensions=function(){t.modal.impl.setContainerDimensions()},t.modal.setPosition=function(){t.modal.impl.setPosition()},t.modal.update=function(i,e){t.modal.impl.update(i,e)},t.fn.modal=function(i){return t.modal.impl.init(this,i)},t.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},t.modal.impl={d:{},init:function(i,e){if(this.d.data)return!1;if(a=h&&!t.support.boxModel,this.o=t.extend({},t.modal.defaults,e),this.zIndex=this.o.zIndex,this.occb=!1,"object"==typeof i)i=i instanceof t?i:t(i),this.d.placeholder=!1,0<i.parent().parent().size()&&(i.before(t("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=i.css("display"),!this.o.persist)&&(this.d.orig=i.clone(!0));else{if("string"!=typeof i&&"number"!=typeof i)return alert("SimpleModal Error: Unsupported data type: "+typeof i),this;i=t("<div></div>").html(i)}return this.create(i),this.open(),t.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]),this},create:function(e){this.getDimensions(),this.o.modal&&i&&(this.d.iframe=t('<iframe src="javascript:false;"></iframe>').css(t.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:l[0],width:l[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo)),this.d.overlay=t("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(t.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?o[0]:0,width:this.o.modal?o[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo),this.d.container=t("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(t.extend({position:this.o.fixed?"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?t(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo),this.d.wrap=t("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container),this.d.data=e.attr("id",e.attr("id")||this.o.dataId).addClass("simplemodal-data").css(t.extend(this.o.dataCss,{display:"none"})).appendTo("body"),this.setContainerDimensions(),this.d.data.appendTo(this.d.wrap),(i||a)&&this.fixIE()},bindEvents:function(){var e=this;t("."+e.o.closeClass).bind("click.simplemodal",function(t){t.preventDefault(),e.close()}),e.o.modal&&e.o.close&&e.o.overlayClose&&e.d.overlay.bind("click.simplemodal",function(t){t.preventDefault(),e.close()}),s.bind("keydown.simplemodal",function(t){e.o.modal&&9===t.keyCode?e.watchTab(t):e.o.close&&e.o.escClose&&27===t.keyCode&&(t.preventDefault(),e.close())}),d.bind("resize.simplemodal orientationchange.simplemodal",function(){e.getDimensions(),e.o.autoResize?e.setContainerDimensions():e.o.autoPosition&&e.setPosition(),i||a?e.fixIE():e.o.modal&&(e.d.iframe&&e.d.iframe.css({height:l[0],width:l[1]}),e.d.overlay.css({height:o[0],width:o[1]}))})},unbindEvents:function(){t("."+this.o.closeClass).unbind("click.simplemodal"),s.unbind("keydown.simplemodal"),d.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var i=this.o.position;t.each([this.d.iframe||null,this.o.modal?this.d.overlay:null,"fixed"===this.d.container.css("position")?this.d.container:null],function(t,e){if(e){var o=e[0].style;if(o.position="absolute",2>t)o.removeExpression("height"),o.removeExpression("width"),o.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),o.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var s,n;i&&i.constructor===Array?(s=i[0]?"number"==typeof i[0]?i[0].toString():i[0].replace(/px/,""):e.css("top").replace(/px/,""),s=-1===s.indexOf("%")?s+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(s.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',i[1]&&(n="number"==typeof i[1]?i[1].toString():i[1].replace(/px/,""),n=-1===n.indexOf("%")?n+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(n.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(s='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',n='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"'),o.removeExpression("top"),o.removeExpression("left"),o.setExpression("top",s),o.setExpression("left",n)}}})},focus:function(i){var e=this,i=i&&-1!==t.inArray(i,["first","last"])?i:"first",o=t(":input:enabled:visible:"+i,e.d.wrap);setTimeout(function(){0<o.length?o.focus():e.d.wrap.focus()},10)},getDimensions:function(){var t="undefined"==typeof window.innerHeight?d.height():window.innerHeight;o=[s.height(),s.width()],l=[t,d.width()]},getVal:function(t,i){return t?"number"==typeof t?t:"auto"===t?0:0<t.indexOf("%")?parseInt(t.replace(/%/,""))/100*("h"===i?l[0]:l[1]):parseInt(t.replace(/px/,"")):null},update:function(t,i){return!!this.d.data&&(this.d.origHeight=this.getVal(t,"h"),this.d.origWidth=this.getVal(i,"w"),this.d.data.hide(),t&&this.d.container.css("height",t),i&&this.d.container.css("width",i),this.setContainerDimensions(),this.d.data.show(),this.o.focus&&this.focus(),this.unbindEvents(),void this.bindEvents())},setContainerDimensions:function(){var t=i||e,o=this.d.origHeight?this.d.origHeight:c?this.d.container.height():this.getVal(t?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),t=this.d.origWidth?this.d.origWidth:c?this.d.container.width():this.getVal(t?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),s=this.d.data.outerHeight(!0),n=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||o,this.d.origWidth=this.d.origWidth||t;var d=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,a=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,d=d&&d<l[0]?d:l[0],a=a&&a<l[1]?a:l[1],h=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",o=o?this.o.autoResize&&o>d?d:o<h?h:o:s?s>d?d:this.o.minHeight&&"auto"!==h&&s<h?h:s:h,d=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",t=t?this.o.autoResize&&t>a?a:t<d?d:t:n?n>a?a:this.o.minWidth&&"auto"!==d&&n<d?d:n:d;this.d.container.css({height:o,width:t}),this.d.wrap.css({overflow:s>o||n>t?"auto":"visible"}),this.o.autoPosition&&this.setPosition()},setPosition:function(){var t,i;t=l[0]/2-this.d.container.outerHeight(!0)/2,i=l[1]/2-this.d.container.outerWidth(!0)/2;var e="fixed"!==this.d.container.css("position")?d.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(t=e+(this.o.position[0]||t),i=this.o.position[1]||i):t=e+t,this.d.container.css({left:i,top:t})},watchTab:function(i){0<t(i.target).parents(".simplemodal-container").length?(this.inputs=t(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),(!i.shiftKey&&i.target===this.inputs[this.inputs.length-1]||i.shiftKey&&i.target===this.inputs[0]||0===this.inputs.length)&&(i.preventDefault(),this.focus(i.shiftKey?"last":"first"))):(i.preventDefault(),this.focus())},open:function(){this.d.iframe&&this.d.iframe.show(),t.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show()),this.o.focus&&this.focus(),this.bindEvents()},close:function(){if(!this.d.data)return!1;if(this.unbindEvents(),t.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var i=t("#simplemodal-placeholder");this.o.persist?i.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),i.replaceWith(this.d.orig))}else this.d.data.hide().remove();this.d.container.hide().remove(),this.d.overlay.hide(),this.d.iframe&&this.d.iframe.hide().remove(),this.d.overlay.remove(),this.d={}}}}});