define(["core/Logger","core/CoreAPI","core/vendor/DropletJS.PubSub.min","core/DomainParser"],function(t,i,s,e){return i.Class.create({url:null,timer:null,status:null,fullDomain:null,baseDomain:null,construct:function(){this.url=i.StayFocusd.getCurrentURL(),this.status="INACTIVE",this.fullDomain=e.extractFullDomain(this.url),this.baseDomain=e.extractBaseDomain(this.url)},init:function(){var t=chrome.runtime.connect({name:"popup"}),i=this;t.onMessage.addListener(function(t){"StayFocusd.timer.updated"===t.message&&i.updateTimer(t.payload.displayTimer)})},updateTimer:function(t){this.timer=t,this.updateStatus(),s.publish("PopupModel.timer.updated",{timer:this.timer})},updateStatus:function(){this.status;i.NuclearOption.isActive()?this.status="NUCLEAR":i.StayFocusd.isActive()===!1?this.status="INACTIVE":this.status="ACTIVE"},isActive:function(){return"ACTIVE"===this.status},isNuclear:function(){return"NUCLEAR"===this.status}})});